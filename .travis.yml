language: php

php:
  - '7.3'

install:
  - composer install

script:
  - vendor/bin/sculpin --env=prod generate

# Only want to run builds on master and develop
branches:
  only:
    - master
    - develop

# Will deploy pushes to master branch on the S3 bucket
# To store credentials securely, here is how to encrypt: https://docs.travis-ci.com/user/encryption-keys/
deploy:
  - provider: s3
    # New bucket
    access_key_id:
      secure: "OIq5u51mzB2sQXMzTtNoZ6p3Jzytg86OEAGtry/OBuIpaucesb2G8foNmC4vCaMq4w1rSx6PGUPVYXVoGEH/gqb5il0Tp/GV1LSk650YsqngswYTw6lV1QeU/jt2Qs7zBz+RcGc6D4ZWmoXfHa1doLE3xO9U6hXBlS+PJlJmoiCCOKbIBWmK06PhAfHKC0f/76JuRiO90ymYIrSl19yxsS4SPQ7znAo4tTm42aDEEJyVO1zEKlp35sC6RE+PbBxhHADWa7KzC0SZL/dQ9uiZ5ioD/Ghm0yyxOAzJh6yJRDjLUG8/erXzORj5vz5ZY00t0ePxGFWly4fepttl23aS4iQndceEqcTbIKIBGyC8/TW6jsUhRUc+tAgDrlwKZCrz31L53ZRzkrN6NVmWXWpqHdPfSpltKSieCxCGsu/IoJoq9SQt74Wy+xS4wbkH5iVhgwAvMz6vQo6UKSVT/sN913BdWVtFtdJ1d/e9XnEwRvEwPeNoUug7ycGboiQoHqUKQ+aCeCfvPqmF+mVMPls+rDvHl2sJ8thGACVl/Qo7b3iXvTH25e6nVlDy9rOANJNEUFWnxVHPA9i3h1KeXk/Tu+UH8Hn13Sl6Dlg8GC2Fpa9FsYhJAO+Q7ds+7t++D7j+oYxG0e/EVrYlJSnpCgD5zSuI92XcF8YdM98dAy5N5nI="
    secret_access_key:
      secure: "NQ23dCtT7LyvVNw6B1ObISTWw8cADmMmF2z6eqKMRsIPtZLtx0X9QGRdJmgxjofoVGCXmG5ITTwQDN/Yg4yHRS9ylCSKnCw3ZLyn38psLHJjJibA+JDnvDPdgsmFyCM6O05ErA4uq8I0LRYwrKxnp8UGFWA5OGweCkFRZ4D4CKQquZIV/+7zSXcVDZDhAMIPUM0pDJHDcdyGkTEsPGWPAlO8jUb+EUou0bm4aA2m2g/4RBtmugbtiK5AplvabtW4qM5wg3zIiZ426A35hMVcvdhnctaS3wECf362tFWWRH8UEnM4rVh9DOfut4CB2+xYwdGqMgyqh1x89Yps1eLhTN2te5j6Cy3mtigcJO9/78iNbbFI6xz3UllLV/VQr0gWPVC+CTXON3ymLvwWn90O0coBCTHyybt137AEJqLsanTAMU+zIKHc5VJYr88PC9KYXHsnrhI7nCrn/8JJE+WkMduaSuk86jL8N4mpdRHx2d7LJ5o07ewJIIId2xR7O8cIoIrF1lBOxTgGTArl+l7+2M8IqavDqgzLV/KutNe3fT86KckaMcANZ3yF5gRcr4wEE3zBqgmFGG8M4Jfcz1scFX6goZbKFDoOTJwMXWZBxG/+3/ocPS8LoyePAKIMCghgJpjwPxKTC+MkPF+N3X2xjG9kWy/bq0xjQvkN1Kq0ufM="
    bucket:
      secure: "RZRMPl7PB6ck9wzHN1SeMjNW0vNViB+Sh+rxZC+32NRcVdURxe2mTJiJp0sz8bpkglenryiw0H6punClhwTq27keAuTJywRzcDiW+bm5OmJNaR6RNvh3WyjYiJh4jbTZDGbKDwbjgUM8gynXr3+/35eltTvKt/8hwIFTzdFbtKGOYlh88pUHEIJXnBsov5RlYRupvy6Ed8i311FRFd/pwuDhxNfZdDnHQh/eZkxfyBlmS9om308tOCDobTa6MChmBUA5zkX/0Q4YPpec4oSzTd7kHoNqe5M1qld/RBbO2H+ZAmZb1UXM4I6uboNENIVQRWV6Sf+xjD8QwdPz19e24fprJ3LLB3kpOc5jIFYG6qCJvk0ovn4W4aOpjaRyjWXu/uPPlcubAYlTsUf2DQ3dZY2cXLbCyUI3fRDBdki/k1SuIoFZIbsAOrjLKuNVJ/4P05nQYI0gFm8UeQjy0RsBgCu/h4u8+OySI69uIJ2CsJiVIUpceA0Rwn1i5wOcz21vQXrt6M0TixHF7yaHVgm/fhIfHZSxtCvTA62b5KZy+AHSynmLQkBPM99mREUjxdjey5S0vxkn4yHeYdz8mE1mwcJWF2Xp6smY/JUcPhnPY20VSKJufcx6C25aNSXIWK7uhhLtkVqJuJbz6/JTwcqVrFJwK7+uQDcr7fx+sLH+4kY="
    region: "us-east-1"
    skip_cleanup: true
    local_dir: output_prod
    on:
      branch: master

notifications:
  slack:
    secure: "fzyyYUdB6JSIXiTE4D752pmTjyL0e5A1XzMlQiep/4kkmSEvkqK4jjKc1ePDHeMu/7GQ/1+HhfLPe+pbP875WM1YkHf54ibSMt08Jrieb/2BBeq+kuOE17hWgwmvqgSu8dSXsBhCgdbiJp2C/+gdl1fZNkUpxI8bNPhnXZ7vh4VlaF9OBqYEVT/N9M0lZEcNmILTojAnPvyopYnjtUDkCka69dTfDXmrv9mBDdafB/QYzlWN7VXzOyd8o/VgJNbCucob7mtM6deIVWfPMxAizBH4gg1aiM8REDvbvomPmNLCEB0qz5+25F94yg0et4ItAMyjVQwGZGKhnbzmZWXcwIy/kuAGkHB4AKpFrv2TZsaBqFBKjWn+aNPl64/b+sRUZL1lBaXIX8ovrT6eM57EbCR9V9gKp3+OuVyC4H89ZRobfg7XOwoaM1czrEjsOGow3PhY5oijraVYisAdvmmyHHDIAhWVmogEdXlsJqTfDJwmU4p+LU9ZHNy8J2VFgLDztSdsxmEui2+FeBNZ+J3SXSaXEzBJ4TydQHj1J/Y1rr9decBq779TujhX/Mn+ZRgrwlwGycj7/gbfFcCh5wHX97SYEor4Rm5FnW0luXSDH9ZmbmVZWAjar/Rs/8ceSzbRdoiMML/1AHimvSkXRQ0TqIB/lW4TL7Pjtj5P26CD1Es="

after_deploy:
  - ./scripts/deploy_notification.sh